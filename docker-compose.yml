services:
  feishu-bot:
    build: .
    container_name: feishu-daily-report
    restart: always
    volumes:
      - ./logs:/app/logs
      - ./data:/app/data
      - ./config:/app/config
      # 使用加密配置（推荐）
      - ./.env.encrypted:/app/.env.encrypted:ro
      # 如果使用明文配置，注释上面一行，取消注释下面一行
      # - ./.env:/app/.env:ro
    environment:
      - TZ=Asia/Shanghai
      - HTTP_PROXY=
      - HTTPS_PROXY=
      - http_proxy=
      - https_proxy=
      - NO_PROXY=localhost,127.0.0.1,open.feishu.cn,.feishu.cn
      - no_proxy=localhost,127.0.0.1,open.feishu.cn,.feishu.cn
      # 解密密钥 - 请修改为你的实际密钥
      # 重要：不要将真实密钥提交到代码仓库！
      # 生产环境建议使用 Docker secrets 或外部密钥管理
      - CONFIG_PASSWORD=${CONFIG_PASSWORD:-your_secret_password_here}
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
